# DMARC Reports Parser

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–µ—Ä DMARC –æ—Ç—á–µ—Ç–æ–≤ —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞ email.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ü—Ä–æ—Ü–µ—Å—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:

    - parsedmarc –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –≤–∞–º–∏ –ø–æ—á—Ç–æ–≤–æ–º—É —è—â–∏–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, dmarc-reports@yourdomain.com) –ø–æ IMAP.
    - –û–Ω –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ –ø–∏—Å—å–º–∞ —Å DMARC-–æ—Ç—á—ë—Ç–∞–º–∏ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö.
    - –∏–∑ –ø–∞–ø–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—Å–µ—Ö .json —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–∏—Å—å–º–∞
    - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤–∞–º–∏ email —á–µ—Ä–µ–∑ SMTP, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ –±—ã–ª–∞ –ø—Ä–æ–π–¥–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ–¥–Ω–æ –∏–∑ –ø–æ–ª–µ–π:
        spf, dkim, dmarc —Å–æ–¥–µ—Ä–∂–∏—Ç false.
    - parsedmarc –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –ø–∏—Å—å–º–∞ –≤ –ø–æ—á—Ç–æ–≤–æ–º —è—â–∏–∫–µ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –≤ Archives/Aggregate, —á—Ç–æ–±—ã –Ω–µ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –ø–æ–≤—Ç–æ—Ä–Ω–æ.

## –ó–∞–ø—É—Å–∫

```bash
# –ò–∑–º–µ–Ω–∏—Ç–µ .env
cp .env.example .env

# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t dmarc-reports-parser:latest .

./run_dmarc.sh
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ .env:

    IMAP_HOST: –°–µ—Ä–≤–µ—Ä –¥–ª—è —á—Ç–µ–Ω–∏—è –ø–æ—á—Ç—ã.
    IMAP_USER: –õ–æ–≥–∏–Ω –ø–æ—á—Ç–æ–≤–æ–≥–æ —è—â–∏–∫–∞ –¥–ª—è —Å–±–æ—Ä–∞ –æ—Ç—á—ë—Ç–æ–≤.
    IMAP_PASSWORD: –ü–∞—Ä–æ–ª—å –æ—Ç —ç—Ç–æ–≥–æ —è—â–∏–∫–∞.
    SMTP_HOST: –°–µ—Ä–≤–µ—Ä –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏—Ç–æ–≥–æ–≤–æ–≥–æ –æ—Ç—á—ë—Ç–∞.
    SMTP_USER: –õ–æ–≥–∏–Ω –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏.
    SMTP_PASSWORD: –ü–∞—Ä–æ–ª—å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏.
    RECIPIENT_EMAIL: Email, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–¥—ë—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –æ—Ç—á—ë—Ç.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
dmarc-reports-parser/
‚îú‚îÄ‚îÄ Dockerfile                 # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ run_dmarc.sh              # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ parsedmarc.ini.template  # –®–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ run_parser.sh         # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
‚îÇ   ‚îî‚îÄ‚îÄ send_email.py         # –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
|-- .env.example              # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ README.md
```

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### Cron
```bash
crontab -e
0 7 * * * /path/to/dmarc-reports-parser/run_dmarc.sh
```

## –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ

```bash
‚ûú  dmarc-reports-parser ./run_dmarc.sh
üîÑ –ó–∞–ø—É—Å–∫ parsedmarc...
‚úÖ –û—Ç—á–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
```

